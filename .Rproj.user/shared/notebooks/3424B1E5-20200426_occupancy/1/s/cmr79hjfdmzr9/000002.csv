"0","# Take the intersection, make pretty site names."
"0","sc.sites <- intersect(sc.checked.2018$TerrName, sc.checked.2019$TerrName) %>% "
"0","  data.frame() %>% rename(old.name=1) %>% "
"0","  mutate(old.name=as.character(old.name), site=case_when("
"0","    old.name == 'DewdneyCreek' ~ 'Dewdney Creek',"
"0","    old.name == 'MtHolden' ~ 'Mt Holden',"
"0","    old.name == 'Granite Mtn' ~ 'Granite Mt',"
"0","    old.name == 'MtPearkes' ~ 'Mt Pearkes',"
"0","    TRUE ~ old.name"
"0","  ))"
"0","# Add occupancy info from 2018."
"0","sc.sites <- sc.checked.2018 %>% dplyr::select(TerrName, Occup2018) %>% "
"0","  right_join(sc.sites, by=c('TerrName'='old.name')) %>% "
"0","  distinct() %>% "
"0","  rename(old.name=TerrName, st.18=Occup2018)"
"0","# Add occupancy info from 2019."
"0","sc.sites <- sc.checked.2019 %>% dplyr::select(TerrName, Occup2019) %>% "
"0","  right_join(sc.sites, by=c('TerrName'='old.name')) %>% "
"0","  distinct() %>% "
"0","  rename(old.name=TerrName, st.19=Occup2019)"
"0","# Fix occupancy."
"0","sc.sites <- sc.sites %>% "
"0","  mutate_at(.vars=vars(st.19, st.18),"
"0","            .funs=funs(.=case_when("
"0","              . == 'Not Occupied' ~ 1,"
"0","              . == 'Breeding' ~ 3,"
"0","              . == 'Resident' ~ 2,"
"0","              TRUE ~ NA_real_"
"0","            ))) %>% "
"0","  dplyr::select(site, status.2018=st.18_., status.2019=st.19_., old.name)"
"0","sc.sites %>% dplyr::select(-old.name) %>% print()"
