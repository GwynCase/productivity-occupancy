"0","# Avian size groups."
"0","items <- items %>% mutate(group=case_when("
"0","    species == 'fasciata' ~ 'Large bird',"
"0","    species == 'umbellus' ~ 'Large bird',"
"0","    species == 'fulignosus' ~ 'Large bird',"
"0","    species == 'stelleri' ~ 'Medium bird',"
"0","    species == 'canadensis' ~ 'Medium bird',"
"0","    species == 'ustulatus' ~ 'Small bird',"
"0","    species == 'naevius' ~ 'Medium bird',"
"0","    species == 'migratorius' ~ 'Medium bird',"
"0","    class == 'Aves' & species == 'unknown' & size == 'Small' ~ 'Small bird',"
"0","    class == 'Aves' & species == 'unknown' & size == 'Medium' ~ 'Medium bird',"
"0","    class == 'Aves' & species == 'unknown' & size == 'Large' ~ 'Large bird',"
"0","    TRUE ~ 'group'))"
"0","# Group the unknown bird species by size."
"0","items <- items %>% mutate(common=case_when("
"0","  class == 'Aves' & species == 'unknown' & size == 'Small' ~ 'average small bird',"
"0","  class == 'Aves' & species == 'unknown' & size == 'Medium' ~ 'average medium bird',"
"0","   class == 'Aves' & species == 'unknown' & size == 'Large' ~ 'average large bird',"
"0","  TRUE ~ common))"
"0","# Fil in mass for known bird species."
"0","items <- items %>% mutate(mass=case_when("
"0","    species == 'fasciata' ~ 392,"
"0","    species == 'umbellus' ~ 600,"
"0","    species == 'fulignosus' ~ 600,"
"0","    species == 'stelleri' ~ 120,"
"0","    species == 'canadensis' ~ 67.5,"
"0","    species == 'ustulatus' ~ 34,"
"0","    species == 'naevius' ~ 82.5,"
"0","    species == 'migratorius' ~ 77,"
"0","    TRUE ~ 0))"
"0","# Assign each mammal to a size group."
"0","items <- items %>% mutate(group=case_when("
"0","    species == 'americanus' ~ 'Large mammal',"
"0","    genus == 'Rattus' ~ 'Medium mammal',"
"0","    species == 'cinerea' ~ 'Medium mammal',"
"0","    species == 'sabrinus' ~ 'Small mammal',"
"0","    genus == 'Neotamias' ~ 'Small mammal',"
"0","    genus == 'Tamiasciurus' ~ 'Medium mammal',"
"0","    genus == 'Myotis' ~ 'Small mammal',"
"0","    class == 'Mammalia' & species == 'unknown' & size == 'Small' ~ 'Small mammal',"
"0","    class == 'Mammalia' & species == 'unknown' & size == 'Medium' ~ 'Medium mammal',"
"0","    class == 'Mammalia' & species == 'unknown' & size == 'Large' ~ 'Large mammal',"
"0","    TRUE ~ group))"
"0","# Group the unknown mammal species by size."
"0","items <- items %>% mutate(common=case_when("
"0","  class == 'Mammalia' & species == 'unknown' & size == 'Small' ~ 'average small mammal',"
"0","  class == 'Mammalia' & species == 'unknown' & size == 'Medium' ~ 'average medium mammal',"
"0","   class == 'Mammalia' & species == 'unknown' & size == 'Large' ~ 'average large mammal',"
"0","  TRUE ~ common))"
"0","# Fil in mass for known bird species."
"0","items <- items %>% mutate(mass=case_when("
"0","    species == 'americanus' ~ 1340,"
"0","    genus == 'Rattus' ~ 269.8,"
"0","    species == 'cinerea' ~ 374.7,"
"0","    species == 'sabrinus' ~ 155.5,"
"0","    genus == 'Neotamias' ~ 66.4,"
"0","    species == 'hudsonicus' ~ 224.5,"
"0","    species == 'douglasii' ~ 203.5,"
"0","    genus == 'Tamiasciurus' & species == 'sp' ~ 214,"
"0","    genus == 'Myotis' ~ 5.8,"
"0","    TRUE ~ mass))"
"0","# A last few unknowns."
"0","items <- items %>% mutate(group=case_when("
"0","  class == 'Unknown' & size == 'Medium' ~ 'Medium item',"
"0","  class == 'Unknown' & size == 'Small' ~ 'Small item',"
"0","  TRUE ~ group))"
"0","items <- items %>% mutate(common=case_when("
"0","  class == 'Unknown' & size == 'Medium' ~ 'average medium item',"
"0","  class == 'Unknown' & size == 'Small' ~ 'average small item',"
"0","  TRUE ~ common))"
"0","# Make it pretty."
"0","items <- items %>% unite(name, 3:4, sep=' ', remove=FALSE) %>%"
"0","  mutate(name=case_when("
"0","    name == 'Unknown unknown' ~ ' ',"
"0","    TRUE ~ name"
"0","  )) %>%"
"0","  arrange(class, group, genus) "
"0","  "
"0","prey.table <- items %>% dplyr::select(common, name, mass) %>%"
"0","  distinct() %>%"
"0","  kable(col.names=c('Prey category', '', 'Mass (g)')) %>%"
"0","  kable_styling(full_width=TRUE) %>%"
"0","  pack_rows('Large birds (> 150 g)', 1, 3) %>%"
"0","  pack_rows('Medium birds (60-150 g)', 4, 8) %>%"
"0","  pack_rows('Small birds (< 40 g)', 9, 10) %>% "
"0","  pack_rows('Large mammals (> 600 g)', 11, 12) %>%"
"0","  pack_rows('Medium mammals (200-600 g)', 13, 18) %>%"
"0","  pack_rows('Small mammals (< 200 g)', 19, 22) %>%"
"0","  pack_rows('Unidentified items', 23, 24)"
