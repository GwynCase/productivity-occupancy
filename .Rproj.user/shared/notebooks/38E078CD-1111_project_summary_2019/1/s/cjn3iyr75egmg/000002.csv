"0","# Do the calculations"
"0","mass.table <- items %>% mutate(mass=as.numeric(mass)) %>%"
"0","  # Calculate totall biomass & total count."
"0","  mutate(t.biomass=sum(mass), t.n=n()) %>% "
"0","  group_by(common) %>%"
"0","  # Calcuate biomass and count by group."
"0","  # Calculate percent biomass and count by group."
"0","  mutate(n=n(), biomass=sum(mass), p.biomass=(biomass/t.biomass*100),"
"0","         p.n=(n/t.n*100))"
"0","# Make a pretty table."
"0","prey.table <- mass.table %>% arrange(class, group, genus) %>% "
"0","  unite(name, 4:5, sep=' ', remove=FALSE) %>% "
"0","  mutate(name=case_when("
"0","    name == 'Unknown unknown' ~ ' ',"
"0","    TRUE ~ name"
"0","  )) %>% "
"0","  dplyr::select(common, name, n, p.n, p.biomass) %>% "
"0","  distinct()"
"0","# Print it out."
"0","prey.table %>% "
"0","  kable('latex', booktabs=T, caption='Summary of nest camera data',"
"0","       table.envir = ""capctable"", col.names=(c('Prey species', '', 'count', '% count', '% biomass')), "
"0","        digits=2) %>% "
"0","  kable_styling(full_width=TRUE) %>%"
"0","  column_spec(1, width='20em') %>% "
"0","  column_spec(2, italic=T, width='20em') %>% "
"0","  pack_rows('Large birds (> 150 g)', 1, 3) %>%"
"0","  pack_rows('Medium birds (60-150 g)', 4, 8) %>%"
"0","  pack_rows('Small birds (< 40 g)', 9, 10) %>% "
"0","  pack_rows('Large mammals (> 600 g)', 11, 12) %>%"
"0","  pack_rows('Medium mammals (200-600 g)', 13, 18) %>%"
"0","  pack_rows('Small mammals (< 200 g)', 19, 22) %>%"
"0","  pack_rows('Unidentified items', 23, 24)"
