"0","# Import conflict settings."
"0","source('../src/conflicted.R')"
"0",""
"0","# Load some libraries."
"0","library(tidyverse)"
"0","library(lubridate)"
"0","library(sf)"
"0","library(adehabitatHR)"
"0","library(recurse)"
"0","library(flextable)"
"0","library(rmapshaper)"
"0","library(ggspatial)"
"0","library(ggrepel)"
"0","library(broom)"
"0",""
"0","# Make a function to round percents nicely."
"0","peretty <- function(x, p=2) {"
"0","  as.numeric(x) %>% "
"0","    round(p)"
"0","}"
"0",""
"0","# Copy out results from Bloxton."
"0","blx <- tribble("
"0","  ~class, ~family, ~category, ~common, ~prop.count,"
"0","  'Aves', 'Phasianidae', 'large bird', 'grouse', 31,"
"0","  'Aves', 'Columbidae', 'large bird', 'band-tailed pigeon', 22,"
"0","  'Aves', 'Corvidae', 'medium bird', ""steller\'s jay"", 14,"
"0","  'Aves', 'Picidae', 'medium bird', 'woodpecker', 4,"
"0","  'Aves', 'Turdidae', 'small bird', 'thrush', 4,"
"0","  'Aves', 'Unknown', 'small bird', 'unknown', 2,"
"0","  'Mammalia', 'Leporidae', 'large mammal', 'snowshoe hare', 10,"
"0","  'Mammalia', 'Sciuridae', 'medium mammal', 'douglas squirrel', 6,"
"0","  'Mammalia', 'Sciuridae', 'small mammal', 'flying squirrel', 4,"
"0","  'Mammalia', 'Rodentia', 'small mammal', 'unknown', 3"
"0",")"
"0",""
"0","# This assumes ""other birds"" and ""other mammals"" are ""small"" sized, and splits woodpeckers and thrushes (which he gives as a combine 8%) into 4% each."
"0",""
"0","# Copy out results from Thraikill."
"0","thr <- tribble("
"0","  ~class, ~family, ~category, ~common, ~prop.count,"
"0","  'Aves', 'Phasianidae', 'large bird', 'ruffed grouse', 45,"
"0","  'Aves', 'Corvidae', 'medium bird', ""steller\'s jay"", 13,"
"0","  'Aves', 'Turdidae', 'medium bird', 'american robin', 13,"
"0","  'Aves', 'Phasianidae', 'large bird', 'ring-necked pheasant', 8,"
"0","  'Aves', 'Odontophoridae', 'large bird', 'mountain quail', 5,"
"0","  'Mammalia', 'Sciuridae', 'medium mammal', 'douglas squirrel', 13,"
"0","  'Mammalia', 'Aplodontiidae', 'large mammal', 'mountain beaver', 3"
"0",")"
"0",""
"0","# Add author information to each data frame."
"0","blx <- blx %>% mutate(author='bloxton')"
"0","thr <- thr %>% mutate(author='thraikill')"
"0",""
"0","# Join the two frames together."
"0","rv <- bind_rows(blx, thr)"
"0",""
"0","# Add in new data."
"0","mn <- tribble("
"0","  ~author, ~class, ~proportion,"
"0","  'case', 'Aves', 60.55,"
"0","  'case', 'Mammalia', 39.45,"
"0","  'watson', 'Aves', 53,"
"0","  'watson', 'Mammalia', 47,"
"0","  'lewis', 'Aves', 83.65,"
"0","  'lewis', 'Mammalia', 16.35"
"0",")"
"0",""
"0","# This is combined pellets-and-remains, for my own data as well as Watson's."
"0",""
"0","# Join with Bloxton & Thraikill."
"0","pnw.class.summary <- rv %>% group_by(author, class) %>% "
"0","  mutate(proportion=sum(prop.count)) %>% "
"0","  distinct(author, class, proportion) %>% "
"0","  bind_rows(mn) %>% "
"0","  pivot_wider(names_from=class, values_from=proportion) %>% "
"0","  arrange(Aves)"
"0",""
"0","mn.sq <- tribble("
"0","  ~author, ~genus, ~prop.count,"
"0","  'case', 'Tamiasciurus', 24.22,"
"0","  'watson', 'Tamiasciurus', 15.1,"
"0",")"
"0",""
"0","pnw.squirrel.summary <- rv %>% filter(common %in% c('douglas squirrel', 'red squirrel')) %>% "
"0","  select(genus=common, prop.count, author) %>%"
"0","  bind_rows(mn.sq) %>% "
"0","  arrange(prop.count)"
