"0","# Read in table of nest coordinates."
"0","telemetry.sites <- read_csv('../data/processed/telemetry_sites.csv')"
"0",""
"0","# Twist wide so each id gets its own row."
"0","captures <- select(telemetry.sites, m_tag, f_tag, year, date, site, nest) %>%"
"0","  pivot_longer(!c(year, date, site, nest), names_to='sex', values_to='id') %>%"
"0","  drop_na(id) %>%"
"0","  mutate(sex=case_when("
"0","    sex == 'm_tag' ~ 'm',"
"0","    sex == 'f_tag' ~ 'f'"
"0","  )) %>% "
"0","  distinct(nest, id, .keep_all=TRUE)"
"0",""
"0","# Number of males and females."
"0","n.males <- filter(captures, sex == 'm') %>% nrow()"
"0","n.females <- filter(captures, sex == 'f') %>% nrow()"
"0",""
"0","# Bring in the clean telemetry data."
"0","telemetry.data <- read_csv('../data/processed/20210420_clean_telemetry.csv', guess_max=15000)"
"0",""
"0","# Define breeding season."
"0","breeding.2018 <- interval(ymd(20180420), ymd(20180915))"
"0","breeding.2019 <- interval(ymd(20190420), ymd(20190915))"
"0","breeding.2020 <- interval(ymd(20200420), ymd(20200915))"
"0",""
"0","# Select only points that fall within the breeding season."
"0","breeding.telemetry <- telemetry.data %>% "
"0","  filter(date %within% c(breeding.2018, breeding.2019, breeding.2020))"
"0",""
"0","# Summary of days of telemetry data."
"0","min.days <- breeding.telemetry %>% group_by(id) %>% "
"0","  mutate(min=min(date), max=max(date), period=max-min) %>% "
"0","  distinct(id, site, period) %>% ungroup() %>% slice_min(period) %>% "
"0","  select(period) %>% as.numeric()"
"0",""
"0","max.days <- breeding.telemetry %>% group_by(id) %>% "
"0","  mutate(min=min(date), max=max(date), period=max-min) %>% "
"0","  distinct(id, site, period) %>% ungroup() %>% slice_max(period) %>% "
"0","  select(period) %>% as.numeric()"
"0",""
"0","mean.days <- breeding.telemetry %>% group_by(id) %>% "
"0","  mutate(min=min(date), max=max(date), period=max-min) %>% "
"0","  distinct(id, site, period) %>% ungroup() %>% "
"0","  summarize(mean=mean(period)) %>% as.numeric() %>% round(digits=2)"
"0",""
"0","sd.days <- breeding.telemetry %>% group_by(id) %>% "
"0","  mutate(min=min(date), max=max(date), period=max-min) %>% "
"0","  distinct(id, site, period) %>% ungroup() %>% "
"0","  summarize(sd=sd(period)) %>% as.numeric() %>% round(digits=2)"
"0",""
"0","# Summary of location points."
"0","mean.points <- breeding.telemetry %>% group_by(id, date) %>% "
"0","  summarize(n=n()) %>% ungroup() %>% "
"0","  summarize(mean=mean(n)) %>% as.numeric() %>% round(digits=2)"
"0",""
"0","# Set of birds used to calculate home ranges."
"0","home.range.set <- breeding.telemetry %>% group_by(id) %>% "
"0","  mutate(min=min(date), max=max(date), n.points=n(), period=max-min) %>% "
"0","  distinct(id, site, n.points, min, max, period) %>% "
"0","  left_join(captures, by=c('id', 'site')) %>% "
"0","  filter(period > 3)"
"0",""
"0","# Number of birds in set."
"0","n.males.hr <- filter(home.range.set, sex == 'm') %>% nrow()"
"0","n.females.hr <- filter(home.range.set, sex == 'f') %>% nrow()"
