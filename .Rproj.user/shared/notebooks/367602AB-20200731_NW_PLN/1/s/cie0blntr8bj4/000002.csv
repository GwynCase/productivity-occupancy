"0","# Calculate diet diversity."
"0","diet.diversity <- plyr::ddply(diet.wide, ~site, function(x) {"
"0","           data.frame(diet.diversity=diversity(x[-1], index='simpson'))"
"0","   })"
"0",""
"0","# Proportion of diet made up of squirrel, by biomass."
"0","proportion.squirrel <-diet.items %>% mutate(mass=as.numeric(mass)) %>% "
"0","  group_by(nest) %>% "
"0","  mutate(total=sum(mass)) %>% "
"0","  filter(genus == 'Tamiasciurus') %>% "
"0","  mutate(amount.sq=sum(mass), proportion.squirrel=amount.sq/total) %>% "
"0","  select(site, proportion.squirrel) %>% distinct()"
"0",""
"0","# Join together."
"0","diet.variables <- right_join(diet.diversity, proportion.squirrel)"
"0",""
"0","diet.variables %>% pivot_longer(-c(site, nest), names_to='variable', values_to='value') %>% "
"0","  ggplot(aes(x=variable, y=value, fill=variable)) + "
"0","  geom_boxplot() +"
"0","  geom_jitter() +"
"0","  scale_fill_brewer(palette='Set2') +"
"0","  theme_classic()"
