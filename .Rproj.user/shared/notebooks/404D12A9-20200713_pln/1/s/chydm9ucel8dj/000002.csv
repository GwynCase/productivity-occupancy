"0","# Calculate proportion of mammal biomass per site."
"0","mammal.mass <- items %>% mutate(mass=as.numeric(mass)) %>% "
"0","  group_by(site) %>% "
"0","  mutate(total=sum(mass)) %>% "
"0","  filter(class == 'Mammalia') %>% "
"0","  mutate(amount.ml=sum(mass), prop.ml=amount.ml/total) %>% "
"0","  dplyr::select(site, prop.ml) %>% distinct()"
"0",""
"0","# Calculate proportion of avian biomass per site."
"0","avian.mass <- items %>% mutate(mass=as.numeric(mass)) %>% "
"0","  group_by(site) %>% "
"0","  mutate(total=sum(mass)) %>% "
"0","  filter(class == 'Aves') %>% "
"0","  mutate(amount.av=sum(mass), prop.av=amount.av/total) %>% "
"0","  dplyr::select(site, prop.av) %>% distinct()"
"0",""
"0","# Join them together."
"0","biomass.ratio <- right_join(mammal.mass, avian.mass) %>% mutate(ratio=prop.ml/prop.av) %>% "
"0","  rename(mammalian=prop.ml, avian=prop.av) %>% "
"0","  pivot_longer(cols=2:3, names_to='group', values_to='proportion')"
"0",""
"0","# Graph it."
"0","ggplot(biomass.ratio, aes(x=site, y=proportion, fill=group)) +"
"0","  geom_bar(position='stack', stat='identity') +"
"0","  labs(title='Proportion biomass by class', x='Site', y='Proportion biomass', fill='Class') +"
"0","  coord_flip() +"
"0","  theme_classic()"
