"0","# Calculate diet diversity."
"0","camera.diet.diversity <- plyr::ddply(camera.diet.wide, ~nest, function(x) {"
"0","           data.frame(diet.diversity=diversity(x[-1], index='simpson'))"
"0","   })"
"0",""
"0","# Proportion of diet made up of squirrel, by biomass."
"0","camera.proportion.squirrel <- diet.items %>% "
"0","  filter(method == 'camera') %>% "
"0","  mutate(mass=as.numeric(mass)) %>% "
"0","  group_by(nest) %>% "
"0","  mutate(total=sum(mass)) %>% "
"0","  filter(genus == 'Tamiasciurus') %>% "
"0","  mutate(amount.sq=sum(mass), proportion.squirrel=amount.sq/total) %>% "
"0","  select(nest, proportion.squirrel) %>% distinct()"
"0",""
"0","# Proportion of diet made up of mammal, by biomass."
"0","camera.proportion.mammal <- diet.items %>% "
"0","  filter(method == 'camera') %>% "
"0","  mutate(mass=as.numeric(mass)) %>% "
"0","  group_by(nest) %>% "
"0","  mutate(total=sum(mass)) %>% "
"0","  filter(class == 'Mammalia') %>% "
"0","  mutate(amount.mm=sum(mass), proportion.mammal=amount.mm/total) %>% "
"0","  select(nest, proportion.mammal) %>% distinct()"
"0",""
"0","# Join them together."
"0","camera.diet.variables <- full_join(camera.diet.diversity, camera.proportion.mammal, by=c('nest')) %>% "
"0","  full_join(camera.proportion.squirrel, by=c('nest'))"
"0",""
"0","camera.diet.variables"
