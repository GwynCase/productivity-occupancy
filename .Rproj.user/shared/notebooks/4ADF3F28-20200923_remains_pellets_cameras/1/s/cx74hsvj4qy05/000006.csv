"0","# Calculate proportion mammal."
"0","proportion.mammal <- diet.items %>% "
"0","  group_by(method) %>% "
"0","  mutate(method.mass=sum(mass, na.rm=TRUE)) %>% "
"0","  ungroup() %>% group_by(source) %>% "
"0","  mutate(source.mass=sum(mass, na.rm=TRUE)) %>%"
"0","  filter(class == 'Mammalia') %>% "
"0","  ungroup() %>% group_by(method) %>% "
"0","  mutate(method.mm=sum(mass, na.rm=TRUE)) %>%"
"0","  ungroup() %>% group_by(source) %>% "
"0","  mutate(source.mm=sum(mass, na.rm=TRUE)) %>%"
"0","  mutate(method.prop.mm=method.mm/method.mass, source.prop.mm=source.mm/source.mass) %>% "
"0","  select(method, source, method.prop.mm, source.prop.mm) %>% "
"0","  distinct() %>% "
"0","  pivot_longer(!c(method, source), names_to='group', values_to='proportion') %>% "
"0","  mutate(name=case_when("
"0","    source == 'C' & group == 'method.prop.mm' ~ 'camera',"
"0","    source == 'R' & group == 'method.prop.mm' ~ 'pellets + remains',"
"0","    source == 'R' & group == 'source.prop.mm' ~ 'remains only',"
"0","    source == 'P' & group == 'source.prop.mm' ~ 'pellets only',"
"0","    TRUE ~ NA_character_"
"0","  )) %>% "
"0","  drop_na()"
"0",""
"0","ggplot(proportion.mammal, aes(x=name, y=proportion)) +"
"0","  geom_point() +"
"0","  geom_segment( aes(x=name, xend=name, y=0, yend=proportion)) +"
"0","  theme_classic() +"
"0","  labs(y='proportion mammal', x='method', title='proportion of biomass composed of mammals')"
