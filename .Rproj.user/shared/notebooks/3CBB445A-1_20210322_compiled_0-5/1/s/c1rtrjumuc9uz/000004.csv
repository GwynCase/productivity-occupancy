"0","# Read in nest data."
"0","nests <- read_csv('../data/processed/sc_nests.csv')"
"0",""
"0","# Calculate a centroid for each site."
"0","centroids <- nests %>% group_by(site) %>% "
"0","  mutate(xcoord=mean(xcoord), ycoord=mean(ycoord)) %>% "
"0","  distinct(site, name, xcoord, ycoord) %>% ungroup()"
"0",""
"0","# Make it a spatial object for later."
"0","centroids.sf <- centroids %>% "
"0","  st_as_sf(coords=c('xcoord', 'ycoord')) %>% "
"0","  st_set_crs('+proj=utm +zone=10 +datum=WGS84 +units=m +no_defs') %>% "
"0","  st_as_sf()"
"0",""
"0","# Bring in study area shapefile."
"0","sc.region <- read_sf(dsn='../data/external/SC_land.shp', layer='SC_land')"
"0","tz.region <- read_sf(dsn='../data/processed/new_transition_zone.shp', "
"0","                     layer='new_transition_zone') %>% "
"0","  ms_simplify()"
"0",""
"0","# Add zone information to centroids."
"0","centroids.sf <- centroids.sf %>% mutate("
"0","  zone=as.integer(st_intersects(geometry, tz.region)),"
"0","  zone=case_when("
"0","    is.na(zone) ~ 'cs',"
"0","    TRUE ~ 'tz'"
"0","  )"
"0",")"
"0",""
"0","# Bring in some base data."
"0","n.america <- read_sf(dsn='../data/external/ne_10m_land.shp', layer='ne_10m_land')"
"0","rivers <- read_sf(dsn='../data/external/ne_10m_rivers_lake_centerlines.shp', "
"0","                  layer='ne_10m_rivers_lake_centerlines')"
"0",""
"0","# Make a reference point for Vancouver."
"0","vancouver <- data.frame(x=-123.113889, y=49.260833, name='Vancouver')"
"0",""
"0","# Make the map."
"0","ggplot() +"
"0","  geom_sf(data=n.america, fill='white') +"
"0","  geom_sf(data=sc.region, fill='lightgrey') + "
"0","  geom_sf(data=tz.region, fill='darkgrey', color=NA) +"
"0","  geom_sf(data=rivers) +"
"0","  coord_sf(xlim=c(st_bbox(sc.region)[1] - 0.5, st_bbox(sc.region)[3] + 0.5), "
"0","           ylim=c(st_bbox(sc.region)[2] - 0.25, st_bbox(sc.region)[4] + 0.25)) +"
"0","  theme_void() +"
"0","  theme(panel.background=element_rect(fill='black'),"
"0","        panel.border=element_rect(color='black', fill=NA)) +"
"0","  annotation_scale(location='br') +"
"0","  annotation_north_arrow(location='br', which_north='true', "
"0","                         pad_y=unit(1, 'cm'), style=north_arrow_minimal) +"
"0","  #geom_sf_text(data=rivers, aes(label=paste(name, featurecla)), nudge_y= -0.20)"
"0","  geom_point(data=vancouver, aes(x=x, y=y)) +"
"0","  geom_label(data=vancouver, aes(x=x, y=y, label=name), nudge_x=0.6, nudge_y=-0.1)"
