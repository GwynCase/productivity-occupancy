"0","links <- diet.items %>% filter(binomial != 'Unidentified item') %>% "
"0","  group_by(source) %>% "
"0","  mutate(total.count=n()) %>% "
"0","  group_by(common) %>% "
"0","  mutate(sp.count=n(), p.count=sp.count/total.count) %>% "
"0","  distinct(common, source, sp.count) %>% "
"0","  rename(target=common, value=sp.count) %>% "
"0","  mutate(source=case_when("
"0","    source == 'R' ~ 'remains',"
"0","    source == 'P' ~ 'pellets',"
"0","    source == 'C' ~ 'cameras'"
"0","  )) %>% "
"0","  data.frame()"
"0",""
"0","nodes <- data.frame("
"0","  name=c(as.character(links$source), "
"0","         as.character(links$target)) %>% unique())"
"0",""
"0","# With networkD3, connection must be provided using id, not using real name like in the links dataframe.. So we need to reformat it."
"0","links$IDsource <- match(links$source, nodes$name)-1 "
"0","links$IDtarget <- match(links$target, nodes$name)-1"
"0",""
"0","# Make the Network"
"0","sankeyNetwork(Links = links, Nodes = nodes,"
"0","              Source = ""IDsource"", Target = ""IDtarget"","
"0","              Value = ""value"", NodeID = ""name"", "
"0","              sinksRight=FALSE, fontFamily='Lato',"
"0","              height=750, width=1000, fontSize=14)"
