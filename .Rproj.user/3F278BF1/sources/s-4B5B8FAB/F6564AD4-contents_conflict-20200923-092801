---
title: "Sunburst"
output: html_document
always_allow_html: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)
```

### What are nothern goshawks eating??

```{r message=FALSE}
# Import conflict settings.
source('../src/conflicted.R')

# Load libraries.
library(tidyverse)
library(sunburstR)
library(d3r)

# Bring in diet data.
source('../src/prey_attributes_revised.R')
```

```{r everything}
everything <- diet.items %>% 
  group_by(class, family, genus, species) %>% 
  mutate(size=sum(mass)) %>% ungroup() %>% 
  select(class, family, genus, species, size) %>% 
  distinct()

everything.tree <- d3_nest(everything, value_cols = "size")

everything.sb <- sunburst(everything.tree, width="100%", height=600, legend=FALSE)

everything.sb
```

Data from all nests so far, by biomass. Includes camera data from 2019 and physical data from 2019 and 2020.

```{r cameras}
everything <- diet.items %>% 
  group_by(class, family, genus, species) %>% 
  mutate(size=sum(mass)) %>% ungroup() %>% 
  select(class, family, genus, species, size) %>% 
  distinct()

everything.tree <- d3_nest(everything, value_cols = "size")

everything.sb <- sunburst(everything.tree, width="100%", height=600, legend=FALSE)

everything.sb
```

















