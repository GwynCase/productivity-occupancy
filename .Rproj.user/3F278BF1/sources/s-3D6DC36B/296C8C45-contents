---
title: "Sunburst"
output: html_document
always_allow_html: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)
```

### What are nothern goshawks eating??

```{r message=FALSE}
# Import conflict settings.
source('../src/conflicted.R')

# Load libraries.
library(tidyverse)
library(sunburstR)
library(d3r)

# Bring in diet data.
df <- read_csv('../data/interim/camera_corrected.csv', guess_max=7000)
source('../src/prey_attributes.R')

# Fix that pesky squirrel... twice.
items <- items %>% mutate(common=case_when(
  genus == 'Tamiasciurus' & species == 'sp' ~ 'Douglas squirrel',
  TRUE ~ common
))

items <- items %>% mutate(species=case_when(
  genus == 'Tamiasciurus' & species == 'sp' ~ 'douglasii',
  TRUE ~ species
))

rf <- items %>% 
  group_by(class, family, genus, species) %>% 
  mutate(size=sum(mass)) %>% ungroup() %>% 
  select(class, family, genus, species, size) %>% 
  distinct()

rftree <- d3_nest(rf, value_cols = "size")

rfsb <- sunburst(rftree, width="100%", height=600, legend=FALSE)

rfsb
```
Data from all nests in 2019, by biomass.



















