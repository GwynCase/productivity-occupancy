mass.by.all <- items %>% mutate(mass=as.numeric(mass)) %>% 
  group_by(site) %>% 
  mutate(total=sum(mass)) %>% 
  group_by(site, class) %>% 
  mutate(amount=sum(mass)) %>% 
  ungroup() %>% 
  mutate(prop=amount/total) %>% 
  dplyr::select(site, class, amount, total, prop) %>% 
  arrange(site, class) %>% 
  distinct()
